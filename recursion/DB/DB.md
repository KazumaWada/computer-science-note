# DBMS(Database Management System)

- 全ての DB の機能を抽象化したシステム
- アプリのクライアント、開発者、データサイエンティスト、DB 管理者が使いやすいように作る
  ///////////////////DB のシステムの主要な要素////////////////////////////

### 特性

- transaction: 情報の状態を変化させる処理
- ソフトウェアはデータと関数。データを保存するシステムはむちゃくちゃ重要。
- query(照会): DB からデータを照会するときに使う言語。

#### 一貫性と統合性(consistency and integrity)

user の email が更新された場合、user のクレジットカード、住所などに保存されている mail も全て更新される必要がある。更新されるときに、その変更は有効であるかどうかが判断された後に更新される。これが一貫性を保証する。

- データエントリ: 銀行口座に入力されたデータが int ではなく、string の場合、transaction は実行されるべきではない。(=一貫性を保障するため、"制約"と呼ばれるルールに従う必要がある。)

#### 永続性(durability)

- もし DB に障害が起こった場合でも、一度 transaction(または commit)された情報は維持される。ハードディスクに直接保存するなどの処理が適応される。DB のデータは、ソフトウェアに保存されているが、ハードウェアにもバックアップを保持している

#### 独立性と並行性(isolation and concurrency)

- DB はデータを独立、分離することができる.
  ↓ どういうことか。
  ネットオークションで異なるパソコン A,B がそれぞれ 200 枚売られているジーンズを 10 枚買おうと試みる、
  ↓
  データが独立していない場合、A が購入したときに B も数秒遅れて購入した場合、B は A の購入が反映されるまで、間違った情報をパソコン越しにみることになる。既に A は 10 枚購入しているのですから。しかし B は 10 枚まだ買われていない枚数をみることになる。
  ↓
  データが分離されていた場合、A,B どちらが先に処理されても構わない。先に実行された方が終わってから、後の人の処理が実行されるから。

#### 原子性(Atomicity)全体的に起こるか、全体的に全く起こらないか。

- 「原子」＝　分割できないという意味から来ている。
- all or nothing(transaction が全体的に起こるか、全く起こらないか)が適応されている
  ↓
  大学のシステムに、学生が授業料を払ったとする。
  ↓
  何らかのシステム障害が起こって学生の授業料が払われていないと表示されてしまう
  ↑
  これを防ぐには。。
  ↓
  「DB が原子性を持つ」all or nothing. つまり、授業料が支払われているか or 何も起こらないという 2 つのみの選択肢を持つ。つまり、障害が起こった場合、「何も起こらない」が適応され、rollback(コードが start に戻りまた同じコードが再び実行される。)
  ///////////////////////////////////////////////////////////////////

#### セキュリティ

- データのアクセスや更新に対して行われる安全対策
  ↓
  例: a さんがアプリ内で障害を起こし、サポートセンターに連絡した。サポートセンターは、a さんのサポートに必要なデータを取得することはできるが、それ以外のデータにはアクセスできないようになっている。
  ↓
  a <-> user データ(全てのデータ取得)
  people support a さん <-> support_user(サポートに必要なデータのみ取得)

### DB の内部

- query processor: SQL 言語を解釈して低層に命令するために使われる
- SQL 言語は DDL(data-definition language == データ定義言語)//データの集合に紐づけられている規則(userDB と productDB を繋げるって ruby でやったじゃん。)
  DML(data-manipulation language == データ操作言語)//データを追加、アクセス、操作ができる
